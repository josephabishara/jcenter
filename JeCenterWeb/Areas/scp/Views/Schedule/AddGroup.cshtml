@model JeCenterWeb.Models.ViewModel.AddGroupScheduleViewModel

@{
    ViewData["Title"] = "أضافة مجموعة";
}
<div>
    <a class="btn btn-outline-info" asp-action="RoomsByDate" asp-route-date="@ViewData["date"]">
        جدول القاعات
    </a>
</div>
<br />
<form asp-action="AddGroup" method="post">
    <h5>
        <strong> يوم : </strong> @ViewData["date"] <br />  <input name="CrrDate" type="hidden" value="@ViewData["date"]" />
    </h5>
    <br />
    <div class="row">

        <div class="col-2">
            <div class="form-group">
                <select name="RoomId" class="form-control select2" asp-items="ViewBag.RoomId">
                    <option value="0">أختار  القاعة</option>
                </select>
            </div>
        </div>
        <div class="col-2">
            <div class="form-group">
                <select name="lectureno" class="form-control select2">
                    <option value="1">الاولى</option>
                    <option value="2">الثانية</option>
                    <option value="3">الثالثة</option>
                    <option value="4">الرابعة</option>
                    <option value="5">الخامسة</option>
                    <option value="6">السادسة</option>
                    <option value="7">السابعة</option>
                    <option value="8">الثامنة</option>
                </select>
            </div>
        </div>
        <div class="col-2">
            <div class="form-group">
                <input name="FirstDay" class="form-control" type="date" value="@ViewData["date"]" />
            </div>
        </div>
        <div class="col-2">
            <div class="form-group">
                <input name="SessionStart" type="time" class="form-control" placeholder="من " />
            </div>
        </div>
        <div class="col-2">
            <div class="form-group">
                <input name="SessionEnd" type="time" class="form-control" placeholder="الى" />
            </div>
        </div>
        <div class="col-2">
            <div class="form-group">
                <select name="physicalyearId" class="form-control select2" asp-items="ViewBag.physicalyearId">
                    <option value="0">  السنة الدراسية</option>
                </select>
            </div>
        </div>


    </div>
    <div class="row">


        <div class="col-2">
            <div class="form-group">
                <select id="TeacherId" name="TeacherId" class="form-control select2" asp-items="ViewBag.TeacherId">
                    <option value="0">أختار  المدرس</option>
                </select>
            </div>
        </div>
        <div class="col-2">
            <div class="form-group">
                <select id="SyllabusID" name="SyllabusID" class="form-control select2" asp-items="ViewBag.SyllabusID">
                    <option value="0">أختار المادة / المنهج</option>
                </select>
            </div>
        </div>
        <div class="col-2">
            <div class="form-group">
                <select name="TypeId" class="form-control select2">
                    <option value="0">مجموعة </option>
                    <option value="1">مراجعة </option>
                    <option value="2">أمتحان </option>
                </select>
            </div>
        </div>
        <div class="col-2">
            <div class="form-group">
                <input name="TeacherFee" class="form-control" placeholder="المدرس" />
            </div>
        </div>
        <div class="col-2">
            <div class="form-group">
                <input name="CenterFee" class="form-control" placeholder="المركز" />
            </div>
        </div>
        <div class="col-2">
            <div class="form-group">
                <input name="ServiceFee" class="form-control" placeholder="خدمة" />
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-2">
            <div class="form-group">
                <label> اظهار للطلبة : </label>
                <input name="Active" type="checkbox"  />
            </div>
        </div>
        <div class="col-2">
            <input type="submit" value="إضافة" class="btn btn-info btn-block" />
        </div>
    </div>
</form>

<table class="table table-striped table-sm text-center">
    <thead>
        <tr>
            <th>
                رقم المحاضرة
            </th>
            <th>
                أسم المجموعة
            </th>
            <th>
                من
            </th>
            <th>
                الى
            </th>

        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.CGroupSchedule)
        {
            <tr style="background-color:lightgreen">
                <td>
                    @item.CGroups.lectureno
                </td>
                <td>
                    @item.CGroups.GroupName
                </td>
                <td>
                    @item.CGroups.SessionStart
                </td>
                <td>
                    @item.CGroups.SessionEnd
                </td>
            </tr>
        }
        @foreach (var item in Model.ReviewsSchedule)
        {
            <tr style="background-color:lightsalmon">
                <td>
                    @item.LectureNo
                </td>
                <td>
                    @item.ReviewsScheduleName
                </td>
                <td>
                    @item.SessionStart
                </td>
                <td>
                    @item.SessionEnd
                </td>
            </tr>
        }
    </tbody>
</table>

@section Scripts {
    <script>
        $(function () {

            $("#TeacherId").change(function () {

                var Syllabuslist = $('#SyllabusID');
                Syllabuslist.empty();

                $.ajax({
                    type: "Get",
                    url: "/scp/Schedule/GetSyllabusID?TeacherId=" + $(this).val(),  //remember change the controller to your owns.
                    success: function (data) {
                        var s = '<option value="0"> اختار المادة / المنهج </option>';
                        for (var i = 0; i < data.length; i++) {
                            console.log(data[i])
                            s += '<option value="' + data[i].id + '">' + data[i].name + '</option>';
                        }

                        $("#SyllabusID").html(s);
                    },
                    error: function (response) {
                        console.log(response.responseText);
                    }
                });
            });
        });
    </script>

}